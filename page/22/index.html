<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT">










<meta name="description" content="欢迎小伙伴们留言">
<meta property="og:type" content="website">
<meta property="og:title" content="默默">
<meta property="og:url" content="https://yangjinheng.github.io/page/22/index.html">
<meta property="og:site_name" content="默默">
<meta property="og:description" content="欢迎小伙伴们留言">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="默默">
<meta name="twitter:description" content="欢迎小伙伴们留言">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://yangjinheng.github.io/page/22/">





  <title>默默</title>
  





  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?be46574a10a6c2b7f67e9c32a008cbd5";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>




</head>

<body itemscope="" itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope="" itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">默默</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br>
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br>
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-react">
          <a href="/2019/01/21/web/react/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-asterisk"></i> <br>
            
            React
          </a>
        </li>
      
        
        <li class="menu-item menu-item-css">
          <a href="/2019/01/02/web/css/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-dashboard"></i> <br>
            
            CSS
          </a>
        </li>
      
        
        <li class="menu-item menu-item-git">
          <a href="/2017/06/21/Linux/git/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-github"></i> <br>
            
            Git
          </a>
        </li>
      
        
        <li class="menu-item menu-item-python">
          <a href="/categories/Python/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-laptop"></i> <br>
            
            Python
          </a>
        </li>
      
        
        <li class="menu-item menu-item-django">
          <a href="/2017/10/06/python/27.Django笔记/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-globe"></i> <br>
            
            Django
          </a>
        </li>
      
        
        <li class="menu-item menu-item-mysql">
          <a href="/2017/01/20/Linux/MYSQL/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-table"></i> <br>
            
            MySQL
          </a>
        </li>
      
        
        <li class="menu-item menu-item-saltstack">
          <a href="/2018/01/10/Linux/SaltStack/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-sitemap"></i> <br>
            
            SaltStack
          </a>
        </li>
      
        
        <li class="menu-item menu-item-ansible">
          <a href="/2017/03/20/Linux/Ansible/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-download"></i> <br>
            
            Ansible
          </a>
        </li>
      
        
        <li class="menu-item menu-item-docker">
          <a href="/2018/07/10/Linux/Docker/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-fighter-jet"></i> <br>
            
            Docker
          </a>
        </li>
      
        
        <li class="menu-item menu-item-kubernetes">
          <a href="/2019/03/29/Linux/k8s笔记/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-cog"></i> <br>
            
            Kubernetes
          </a>
        </li>
      
        
        <li class="menu-item menu-item-个人日志">
          <a href="/categories/个人日志/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-github-alt"></i> <br>
            
            个人日志
          </a>
        </li>
      

      
    </ul>
  

  
</nav>


 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://yangjinheng.github.io/2017/09/22/python/13.pathlib和shutil/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Jin Heng">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="默默">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/09/22/python/13.pathlib和shutil/" itemprop="url">pathlib和shutil</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-09-22T00:00:00+08:00">
                2017-09-22
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/Python/" itemprop="url" rel="index">
                    <span itemprop="name">Python</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="路径处理Path"><a href="#路径处理Path" class="headerlink" title="路径处理Path"></a>路径处理Path</h1><h2 id="模块的导入"><a href="#模块的导入" class="headerlink" title="模块的导入"></a>模块的导入</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> pathlib <span class="keyword">import</span> Path</span><br><span class="line">p1 = Path(<span class="string">'/etc/rc.local'</span>)</span><br></pre></td></tr></table></figure>
<h2 id="绝对路径-absolute"><a href="#绝对路径-absolute" class="headerlink" title="绝对路径.absolute"></a>绝对路径.absolute</h2><p>显示文件的绝对路径</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">245</span>]: p1 = Path(<span class="string">'sample.txt'</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">247</span>]: p1.absolute()</span><br><span class="line">Out[<span class="number">247</span>]: PosixPath(<span class="string">'/home/python/magedu/projects/test/sample.txt'</span>)</span><br></pre></td></tr></table></figure>
<h2 id="统一资源标识符-as-uri"><a href="#统一资源标识符-as-uri" class="headerlink" title="统一资源标识符.as_uri"></a>统一资源标识符.as_uri</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">39</span>]: p2 = Path(<span class="string">'/home/python/magedu/projects/test/sample.txt'</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">42</span>]: p2.as_uri()</span><br><span class="line">Out[<span class="number">42</span>]: <span class="string">'file:///home/python/magedu/projects/test/sample.txt'</span></span><br></pre></td></tr></table></figure>
<h2 id="当前工作目录-cwd"><a href="#当前工作目录-cwd" class="headerlink" title="当前工作目录.cwd"></a>当前工作目录.cwd</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">111</span>]: p2</span><br><span class="line">Out[<span class="number">111</span>]: PosixPath(<span class="string">'/home/python/magedu/projects/test/sample.txt'</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">112</span>]: p2.cwd()</span><br><span class="line">Out[<span class="number">112</span>]: PosixPath(<span class="string">'/home/python/magedu/projects'</span>)</span><br></pre></td></tr></table></figure>
<h2 id="磁盘根前戳-drive"><a href="#磁盘根前戳-drive" class="headerlink" title="磁盘根前戳.drive"></a>磁盘根前戳.drive</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>p3 = Path(<span class="string">'D:\Program Files\XMind\XMind.exe'</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>p3.drive</span><br><span class="line"><span class="string">'D:'</span></span><br></pre></td></tr></table></figure>
<h2 id="对-进行扩展-expanduser"><a href="#对-进行扩展-expanduser" class="headerlink" title="对~进行扩展.expanduser"></a>对~进行扩展.expanduser</h2><p>返回扩展的 <code>~</code> 和 <code>~user</code> 的一个新路径</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">136</span>]: p4 = Path(<span class="string">'~/magedu/projects/test/sample.txt'</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">137</span>]: p4.expanduser()</span><br><span class="line">Out[<span class="number">137</span>]: PosixPath(<span class="string">'/home/python/magedu/projects/test/sample.txt'</span>)</span><br></pre></td></tr></table></figure>
<h2 id="用户家目录-home"><a href="#用户家目录-home" class="headerlink" title="用户家目录.home"></a>用户家目录.home</h2><p>这是公共方法</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">175</span>]: p4.home()</span><br><span class="line">Out[<span class="number">175</span>]: PosixPath(<span class="string">'/home/python'</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">176</span>]: p3.home()</span><br><span class="line">Out[<span class="number">176</span>]: PosixPath(<span class="string">'/home/python'</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">178</span>]: p3</span><br><span class="line">Out[<span class="number">178</span>]: PosixPath(<span class="string">'D:\\Program Files\\XMind\\XMind.exe'</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">179</span>]: p4</span><br><span class="line">Out[<span class="number">179</span>]: PosixPath(<span class="string">'~/magedu/projects/test/sample.txt'</span>)</span><br></pre></td></tr></table></figure>
<h2 id="路径拼接-joinpath"><a href="#路径拼接-joinpath" class="headerlink" title="路径拼接.joinpath"></a>路径拼接.joinpath</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">369</span>]: p5</span><br><span class="line">Out[<span class="number">369</span>]: PosixPath(<span class="string">'/dev'</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">370</span>]: p5.joinpath(<span class="string">'tty'</span>)</span><br><span class="line">Out[<span class="number">370</span>]: PosixPath(<span class="string">'/dev/tty'</span>)</span><br></pre></td></tr></table></figure>
<h2 id="路径模式匹配-match"><a href="#路径模式匹配-match" class="headerlink" title="路径模式匹配.match"></a>路径模式匹配.match</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">424</span>]: p2</span><br><span class="line">Out[<span class="number">424</span>]: PosixPath(<span class="string">'/home/python/magedu/projects/test/sample.txt'</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">425</span>]: p2.match(<span class="string">'*.txt'</span>)</span><br><span class="line">Out[<span class="number">425</span>]: <span class="keyword">True</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">436</span>]: p2.match(<span class="string">'**/*.txt'</span>)</span><br><span class="line">Out[<span class="number">436</span>]: <span class="keyword">True</span></span><br></pre></td></tr></table></figure>
<h2 id="父目录-parent"><a href="#父目录-parent" class="headerlink" title="父目录.parent"></a>父目录.parent</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">37</span>]: p2</span><br><span class="line">Out[<span class="number">37</span>]: PosixPath(<span class="string">'/etc/sysconfig/network-scripts/ifcfg-ens34'</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">38</span>]: p2.parent</span><br><span class="line">Out[<span class="number">38</span>]: PosixPath(<span class="string">'/etc/sysconfig/network-scripts'</span>)</span><br></pre></td></tr></table></figure>
<h2 id="所有的父目录-parents"><a href="#所有的父目录-parents" class="headerlink" title="所有的父目录.parents"></a>所有的父目录.parents</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">41</span>]: list(p2.parents)</span><br><span class="line">Out[<span class="number">41</span>]: </span><br><span class="line">[PosixPath(<span class="string">'/etc/sysconfig/network-scripts'</span>),</span><br><span class="line"> PosixPath(<span class="string">'/etc/sysconfig'</span>),</span><br><span class="line"> PosixPath(<span class="string">'/etc'</span>),</span><br><span class="line"> PosixPath(<span class="string">'/'</span>)]</span><br></pre></td></tr></table></figure>
<h2 id="文件全名-name"><a href="#文件全名-name" class="headerlink" title="文件全名.name"></a>文件全名.name</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">15</span>]: p2 = Path(<span class="string">'/etc/sysconfig/network-scripts/ifcfg-ens34'</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">16</span>]: p2.name</span><br><span class="line">Out[<span class="number">16</span>]: <span class="string">'ifcfg-ens34'</span></span><br></pre></td></tr></table></figure>
<h2 id="取得文件和目录的二元组"><a href="#取得文件和目录的二元组" class="headerlink" title="取得文件和目录的二元组"></a>取得文件和目录的二元组</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">545</span>]: <span class="keyword">from</span> os <span class="keyword">import</span> path</span><br><span class="line"></span><br><span class="line">In [<span class="number">548</span>]: p2</span><br><span class="line">Out[<span class="number">548</span>]: PosixPath(<span class="string">'/etc/sysconfig/network-scripts/ifcfg-ens34'</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">547</span>]: print(path.split(path.abspath(str(p2))))</span><br><span class="line">(<span class="string">'/etc/sysconfig/network-scripts'</span>, <span class="string">'ifcfg-ens34'</span>)</span><br></pre></td></tr></table></figure>
<h2 id="不含扩展名的文件名称-stem"><a href="#不含扩展名的文件名称-stem" class="headerlink" title="不含扩展名的文件名称.stem"></a>不含扩展名的文件名称.stem</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">368</span>]: p7 = Path(<span class="string">'/etc/rc.local'</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">369</span>]: p7.stem</span><br><span class="line">Out[<span class="number">369</span>]: <span class="string">'rc'</span></span><br></pre></td></tr></table></figure>
<h2 id="显示文件扩展名-suffix"><a href="#显示文件扩展名-suffix" class="headerlink" title="显示文件扩展名.suffix"></a>显示文件扩展名.suffix</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">368</span>]: p7 = Path(<span class="string">'/etc/rc.local'</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">370</span>]: p7.suffix</span><br><span class="line">Out[<span class="number">370</span>]: <span class="string">'.local'</span></span><br></pre></td></tr></table></figure>
<h2 id="显示所有扩展名-suffixes"><a href="#显示所有扩展名-suffixes" class="headerlink" title="显示所有扩展名.suffixes"></a>显示所有扩展名.suffixes</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">372</span>]: p8 = Path(<span class="string">'/tmp/mysql.tar.gz'</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">373</span>]: p8.suffixes</span><br><span class="line">Out[<span class="number">373</span>]: [<span class="string">'.tar'</span>, <span class="string">'.gz'</span>]</span><br></pre></td></tr></table></figure>
<h2 id="路径拆分为列表-parts"><a href="#路径拆分为列表-parts" class="headerlink" title="路径拆分为列表.parts"></a>路径拆分为列表.parts</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">42</span>]: list(p2.parts)</span><br><span class="line">Out[<span class="number">42</span>]: [<span class="string">'/'</span>, <span class="string">'etc'</span>, <span class="string">'sysconfig'</span>, <span class="string">'network-scripts'</span>, <span class="string">'ifcfg-ens34'</span>]</span><br></pre></td></tr></table></figure>
<h2 id="计算相对剩余路径-relative-to"><a href="#计算相对剩余路径-relative-to" class="headerlink" title="计算相对剩余路径.relative_to"></a>计算相对剩余路径.relative_to</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">78</span>]: p3 = Path(<span class="string">'python/project/cmdb'</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">79</span>]: p3.relative_to(<span class="string">'python'</span>)</span><br><span class="line">Out[<span class="number">79</span>]: PosixPath(<span class="string">'project/cmdb'</span>)</span><br></pre></td></tr></table></figure>
<h2 id="显示根目录-root"><a href="#显示根目录-root" class="headerlink" title="显示根目录.root"></a>显示根目录.root</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">297</span>]: p2</span><br><span class="line">Out[<span class="number">297</span>]: PosixPath(<span class="string">'/etc/sysconfig/network-scripts/ifcfg-ens34'</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">298</span>]: p2.root</span><br><span class="line">Out[<span class="number">298</span>]: <span class="string">'/'</span></span><br></pre></td></tr></table></figure>
<h2 id="替换显示-with-name"><a href="#替换显示-with-name" class="headerlink" title="替换显示.with_name"></a>替换显示.with_name</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">504</span>]: p2</span><br><span class="line">Out[<span class="number">504</span>]: PosixPath(<span class="string">'/etc/sysconfig/network-scripts/ifcfg-ens34'</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">505</span>]: p2.with_name(<span class="string">'ifcfg-ens33'</span>)</span><br><span class="line">Out[<span class="number">505</span>]: PosixPath(<span class="string">'/etc/sysconfig/network-scripts/ifcfg-ens33'</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">506</span>]: p2</span><br><span class="line">Out[<span class="number">506</span>]: PosixPath(<span class="string">'/etc/sysconfig/network-scripts/ifcfg-ens34'</span>)</span><br></pre></td></tr></table></figure>
<h2 id="替换显示扩展名-with-suffix"><a href="#替换显示扩展名-with-suffix" class="headerlink" title="替换显示扩展名.with_suffix"></a>替换显示扩展名.with_suffix</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">510</span>]: p1</span><br><span class="line">Out[<span class="number">510</span>]: PosixPath(<span class="string">'D:\\Program Files\\Foxmail 7.2\\Foxmail.exe'</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">511</span>]: p1.with_suffix(<span class="string">'.msi'</span>)</span><br><span class="line">Out[<span class="number">511</span>]: PosixPath(<span class="string">'D:\\Program Files\\Foxmail 7.2\\Foxmail.msi'</span>)</span><br><span class="line">    </span><br><span class="line">In [<span class="number">512</span>]: p1</span><br><span class="line">Out[<span class="number">512</span>]: PosixPath(<span class="string">'D:\\Program Files\\Foxmail 7.2\\Foxmail.exe'</span>)</span><br></pre></td></tr></table></figure>
<h1 id="文件检测Path"><a href="#文件检测Path" class="headerlink" title="文件检测Path"></a>文件检测Path</h1><h2 id="模块的导入-1"><a href="#模块的导入-1" class="headerlink" title="模块的导入"></a>模块的导入</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> pathlib <span class="keyword">import</span> Path</span><br><span class="line">p1 = Path(<span class="string">'/etc/rc.local'</span>)</span><br></pre></td></tr></table></figure>
<h2 id="是否绝对路径-is-absolute"><a href="#是否绝对路径-is-absolute" class="headerlink" title="是否绝对路径.is_absolute"></a>是否绝对路径.is_absolute</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">183</span>]: p1</span><br><span class="line">Out[<span class="number">183</span>]: PosixPath(<span class="string">'sample.txt'</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">185</span>]: p1.is_absolute()</span><br><span class="line">Out[<span class="number">185</span>]: <span class="keyword">False</span></span><br><span class="line">    </span><br><span class="line">In [<span class="number">187</span>]: p2</span><br><span class="line">Out[<span class="number">187</span>]: PosixPath(<span class="string">'/home/python/magedu/projects/test/sample.txt'</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">188</span>]: p2.is_absolute()</span><br><span class="line">Out[<span class="number">188</span>]: <span class="keyword">True</span></span><br></pre></td></tr></table></figure>
<h2 id="是否为块设备-is-block-device"><a href="#是否为块设备-is-block-device" class="headerlink" title="是否为块设备.is_block_device"></a>是否为块设备.is_block_device</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">193</span>]: p6 = Path(<span class="string">'/dev/sda'</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">194</span>]: p6.is_block_device()</span><br><span class="line">Out[<span class="number">194</span>]: <span class="keyword">True</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">195</span>]: p5</span><br><span class="line">Out[<span class="number">195</span>]: PosixPath(<span class="string">'/dev'</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">196</span>]: p5.is_block_device()</span><br><span class="line">Out[<span class="number">196</span>]: <span class="keyword">False</span></span><br></pre></td></tr></table></figure>
<h2 id="是否为字符设备-is-char-device"><a href="#是否为字符设备-is-char-device" class="headerlink" title="是否为字符设备.is_char_device"></a>是否为字符设备.is_char_device</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">197</span>]: p7 = Path(<span class="string">'/dev/tty'</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">198</span>]: p7.is_char_device()</span><br><span class="line">Out[<span class="number">198</span>]: <span class="keyword">True</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">199</span>]: p6</span><br><span class="line">Out[<span class="number">199</span>]: PosixPath(<span class="string">'/dev/sda'</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">200</span>]: p6.is_char_device()</span><br><span class="line">Out[<span class="number">200</span>]: <span class="keyword">False</span></span><br></pre></td></tr></table></figure>
<h2 id="是否为目录-is-dir"><a href="#是否为目录-is-dir" class="headerlink" title="是否为目录.is_dir"></a>是否为目录.is_dir</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">204</span>]: p4</span><br><span class="line">Out[<span class="number">204</span>]: PosixPath(<span class="string">'~/magedu/projects/test/sample.txt'</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">205</span>]: p5</span><br><span class="line">Out[<span class="number">205</span>]: PosixPath(<span class="string">'/dev'</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">206</span>]: p4.is_dir()</span><br><span class="line">Out[<span class="number">206</span>]: <span class="keyword">False</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">207</span>]: p5.is_dir()</span><br><span class="line">Out[<span class="number">207</span>]: <span class="keyword">True</span></span><br></pre></td></tr></table></figure>
<h2 id="是否为先进先出文件-is-fifo"><a href="#是否为先进先出文件-is-fifo" class="headerlink" title="是否为先进先出文件.is_fifo"></a>是否为先进先出文件.is_fifo</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">253</span>]: p8 = Path(<span class="string">'/run/systemd/initctl/fifo'</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">254</span>]: p8.is_fifo()</span><br><span class="line">Out[<span class="number">254</span>]: <span class="keyword">True</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">256</span>]: p7</span><br><span class="line">Out[<span class="number">256</span>]: PosixPath(<span class="string">'/dev/tty'</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">257</span>]: p7.is_fifo()</span><br><span class="line">Out[<span class="number">257</span>]: <span class="keyword">False</span></span><br></pre></td></tr></table></figure>
<h2 id="是否为普通文件-is-file"><a href="#是否为普通文件-is-file" class="headerlink" title="是否为普通文件.is_file"></a>是否为普通文件.is_file</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">266</span>]: p3</span><br><span class="line">Out[<span class="number">266</span>]: PosixPath(<span class="string">'D:\\Program Files\\XMind\\XMind.exe'</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">267</span>]: p3.is_file()</span><br><span class="line">Out[<span class="number">267</span>]: <span class="keyword">False</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">270</span>]: p2</span><br><span class="line">Out[<span class="number">270</span>]: PosixPath(<span class="string">'/home/python/magedu/projects/test/sample.txt'</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">271</span>]: p2.is_file()</span><br><span class="line">Out[<span class="number">271</span>]: <span class="keyword">True</span></span><br></pre></td></tr></table></figure>
<h2 id="有无系统保留名称-is-reserved"><a href="#有无系统保留名称-is-reserved" class="headerlink" title="有无系统保留名称.is_reserved"></a>有无系统保留名称.is_reserved</h2><p>如果路径包含系统保留的特殊名称之一（如果有），则返回True。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">272</span>]: p2</span><br><span class="line">Out[<span class="number">272</span>]: PosixPath(<span class="string">'/home/python/magedu/projects/test/sample.txt'</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">273</span>]: p2.is_reserved()</span><br><span class="line">Out[<span class="number">273</span>]: <span class="keyword">False</span></span><br></pre></td></tr></table></figure>
<h2 id="是否为套接字文件-is-socket"><a href="#是否为套接字文件-is-socket" class="headerlink" title="是否为套接字文件.is_socket"></a>是否为套接字文件.is_socket</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">307</span>]: p9 = Path(<span class="string">'/run/docker.sock'</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">308</span>]: p9.is_socket()</span><br><span class="line">Out[<span class="number">308</span>]: <span class="keyword">True</span></span><br></pre></td></tr></table></figure>
<h2 id="是否为软链接-is-symlink"><a href="#是否为软链接-is-symlink" class="headerlink" title="是否为软链接.is_symlink"></a>是否为软链接.is_symlink</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">310</span>]: p7</span><br><span class="line">Out[<span class="number">310</span>]: PosixPath(<span class="string">'/dev/tty'</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">311</span>]: p7.is_symlink()</span><br><span class="line">Out[<span class="number">311</span>]: <span class="keyword">False</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">312</span>]: p9 = Path(<span class="string">'/etc/rc.local'</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">313</span>]: p9.is_symlink()</span><br><span class="line">Out[<span class="number">313</span>]: <span class="keyword">True</span></span><br></pre></td></tr></table></figure>
<h2 id="是否为同一个路径-samefile"><a href="#是否为同一个路径-samefile" class="headerlink" title="是否为同一个路径.samefile"></a>是否为同一个路径.samefile</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">309</span>]: p2</span><br><span class="line">Out[<span class="number">309</span>]: PosixPath(<span class="string">'/etc/sysconfig/network-scripts/ifcfg-ens34'</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">310</span>]: p4</span><br><span class="line">Out[<span class="number">310</span>]: PosixPath(<span class="string">'ifcfg-ens34'</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">311</span>]: p4.samefile(p2)</span><br><span class="line">Out[<span class="number">311</span>]: <span class="keyword">True</span></span><br><span class="line">    </span><br><span class="line">In [<span class="number">356</span>]: p5</span><br><span class="line">Out[<span class="number">356</span>]: PosixPath(<span class="string">'/tmp/test'</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">357</span>]: p5.samefile(<span class="string">'test'</span>)</span><br><span class="line">Out[<span class="number">357</span>]: <span class="keyword">False</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">358</span>]: p5.samefile(<span class="string">'/tmp/test'</span>)</span><br><span class="line">Out[<span class="number">358</span>]: <span class="keyword">True</span></span><br></pre></td></tr></table></figure>
<h2 id="文件存在性-exists"><a href="#文件存在性-exists" class="headerlink" title="文件存在性.exists"></a>文件存在性.exists</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>p3 = Path(<span class="string">'D:\Program Files\XMind\XMind.exe'</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>p3.exists()</span><br><span class="line"><span class="keyword">True</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>p3 = Path(<span class="string">'D:\Program Files\XMind\XMind.exe.bak'</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>p3.exists()</span><br><span class="line"><span class="keyword">False</span></span><br></pre></td></tr></table></figure>
<h1 id="文件操作Path"><a href="#文件操作Path" class="headerlink" title="文件操作Path"></a>文件操作Path</h1><h2 id="模块的导入-2"><a href="#模块的导入-2" class="headerlink" title="模块的导入"></a>模块的导入</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> pathlib <span class="keyword">import</span> Path</span><br><span class="line">p1 = Path(<span class="string">'/etc/rc.local'</span>)</span><br></pre></td></tr></table></figure>
<h2 id="通配文件迭代器-glob"><a href="#通配文件迭代器-glob" class="headerlink" title="通配文件迭代器.glob"></a>通配文件迭代器.glob</h2><p>使用指定的模式迭代目录下的文件，列出符合条件的文件</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">146</span>]: p5 =Path(<span class="string">'/dev'</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">147</span>]: list(p5.glob(<span class="string">'sda*'</span>))</span><br><span class="line">Out[<span class="number">147</span>]: </span><br><span class="line">[PosixPath(<span class="string">'/dev/sda4'</span>),</span><br><span class="line"> PosixPath(<span class="string">'/dev/sda3'</span>),</span><br><span class="line"> PosixPath(<span class="string">'/dev/sda2'</span>),</span><br><span class="line"> PosixPath(<span class="string">'/dev/sda1'</span>),</span><br><span class="line"> PosixPath(<span class="string">'/dev/sda'</span>)]</span><br><span class="line">In [<span class="number">152</span>]: list(p5.glob(<span class="string">'map*'</span>))</span><br><span class="line">Out[<span class="number">152</span>]: [PosixPath(<span class="string">'/dev/mapper'</span>)]</span><br></pre></td></tr></table></figure>
<h2 id="递归统配迭代器-rglob"><a href="#递归统配迭代器-rglob" class="headerlink" title="递归统配迭代器.rglob"></a>递归统配迭代器.rglob</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">162</span>]: list(p5.rglob(<span class="string">'vfio'</span>))</span><br><span class="line">Out[<span class="number">162</span>]: [PosixPath(<span class="string">'/dev/vfio'</span>), PosixPath(<span class="string">'/dev/vfio/vfio'</span>)]</span><br></pre></td></tr></table></figure>
<h2 id="非递归目录迭代器-iterdir"><a href="#非递归目录迭代器-iterdir" class="headerlink" title="非递归目录迭代器.iterdir"></a>非递归目录迭代器.iterdir</h2> <figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">364</span>]: p10 = Path(<span class="string">'/home'</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">365</span>]: p10.iterdir()</span><br><span class="line">Out[<span class="number">365</span>]: &lt;generator object Path.iterdir at <span class="number">0x7fe1e91114c0</span>&gt;</span><br><span class="line"></span><br><span class="line">In [<span class="number">366</span>]: list(p10.iterdir())</span><br><span class="line">Out[<span class="number">366</span>]: [PosixPath(<span class="string">'/home/python'</span>)]</span><br></pre></td></tr></table></figure>
<h2 id="创建目录-mkdir"><a href="#创建目录-mkdir" class="headerlink" title="创建目录.mkdir"></a>创建目录.mkdir</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">8</span>]: p1 = Path(<span class="string">'./test'</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">11</span>]: ll</span><br><span class="line">总用量 <span class="number">16</span></span><br><span class="line">-rwxr-xr-x <span class="number">1</span> python <span class="number">13099</span> <span class="number">10</span>月 <span class="number">23</span> <span class="number">2017</span> sample.txt*</span><br><span class="line"></span><br><span class="line">In [<span class="number">12</span>]: p1.mkdir()</span><br><span class="line"></span><br><span class="line">In [<span class="number">13</span>]: ll</span><br><span class="line">总用量 <span class="number">16</span></span><br><span class="line">-rwxr-xr-x <span class="number">1</span> python <span class="number">13099</span> <span class="number">10</span>月 <span class="number">23</span> <span class="number">2017</span> sample.txt*</span><br><span class="line">drwxrwxr-x <span class="number">2</span> python     <span class="number">6</span> <span class="number">4</span>月  <span class="number">25</span> <span class="number">09</span>:<span class="number">01</span> test/</span><br></pre></td></tr></table></figure>
<h2 id="删除空目录-rmdir"><a href="#删除空目录-rmdir" class="headerlink" title="删除空目录.rmdir"></a>删除空目录.rmdir</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">284</span>]: ll</span><br><span class="line">总用量 <span class="number">0</span></span><br><span class="line">lrwxrwxrwx 1 python 42 4月  25 09:59 ifcfg-ens34 -&gt; /etc/sysconfig/network-scripts/ifcfg-ens34</span><br><span class="line">drwxrwxr-x <span class="number">3</span> python <span class="number">22</span> <span class="number">3</span>月   <span class="number">6</span> <span class="number">09</span>:<span class="number">47</span> magedu/</span><br><span class="line">-rw-rw-r-- <span class="number">1</span> python  <span class="number">0</span> <span class="number">4</span>月  <span class="number">25</span> <span class="number">09</span>:<span class="number">58</span> test</span><br><span class="line">drwxrwxr-x <span class="number">2</span> python  <span class="number">6</span> <span class="number">4</span>月  <span class="number">25</span> <span class="number">10</span>:<span class="number">00</span> testdir/</span><br><span class="line"></span><br><span class="line">In [<span class="number">285</span>]: p5</span><br><span class="line">Out[<span class="number">285</span>]: PosixPath(<span class="string">'testdir'</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">286</span>]: p5.rmdir()</span><br><span class="line"></span><br><span class="line">In [<span class="number">287</span>]: ll</span><br><span class="line">总用量 <span class="number">0</span></span><br><span class="line">lrwxrwxrwx 1 python 42 4月  25 09:59 ifcfg-ens34 -&gt; /etc/sysconfig/network-scripts/ifcfg-ens34</span><br><span class="line">drwxrwxr-x <span class="number">3</span> python <span class="number">22</span> <span class="number">3</span>月   <span class="number">6</span> <span class="number">09</span>:<span class="number">47</span> magedu/</span><br><span class="line">-rw-rw-r-- <span class="number">1</span> python  <span class="number">0</span> <span class="number">4</span>月  <span class="number">25</span> <span class="number">09</span>:<span class="number">58</span> test</span><br></pre></td></tr></table></figure>
<h2 id="文件属主-owner"><a href="#文件属主-owner" class="headerlink" title="文件属主.owner"></a>文件属主.owner</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">169</span>]: p5.owner()</span><br><span class="line">Out[<span class="number">169</span>]: <span class="string">'root'</span></span><br></pre></td></tr></table></figure>
<h2 id="文件属组-group"><a href="#文件属组-group" class="headerlink" title="文件属组.group"></a>文件属组.group</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">170</span>]: p5.group()</span><br><span class="line">Out[<span class="number">170</span>]: <span class="string">'root'</span></span><br></pre></td></tr></table></figure>
<h2 id="打开文件-open"><a href="#打开文件-open" class="headerlink" title="打开文件.open"></a>打开文件.open</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">15</span>]: p2 = Path(<span class="string">'/etc/sysconfig/network-scripts/ifcfg-ens34'</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">21</span>]: netfile = p2.open()</span><br><span class="line"></span><br><span class="line">In [<span class="number">22</span>]: netfile.read()</span><br><span class="line">Out[<span class="number">22</span>]: <span class="string">'BOOTPROTO=static\nDEVICE=ens34\nONBOOT=yes\nIPADDR=192.168.100.253\nNETMASK=255.255.255.0\n'</span></span><br></pre></td></tr></table></figure>
<h3 id="字节模式"><a href="#字节模式" class="headerlink" title="字节模式"></a>字节模式</h3><ul>
<li>读取.read_bytes</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">47</span>]: p2.read_bytes()</span><br><span class="line">Out[<span class="number">47</span>]: <span class="string">b'BOOTPROTO=static\nDEVICE=ens34\nONBOOT=yes\nIPADDR=192.168.100.253\nNETMASK=255.255.255.0\n'</span></span><br></pre></td></tr></table></figure>
<ul>
<li>写入.write_bytes</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">525</span>]: p5</span><br><span class="line">Out[<span class="number">525</span>]: PosixPath(<span class="string">'/tmp/test'</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">527</span>]: p5.write_bytes(<span class="string">b'abc'</span>)</span><br><span class="line">Out[<span class="number">527</span>]: <span class="number">3</span></span><br><span class="line">    </span><br><span class="line">In [<span class="number">530</span>]: cat test</span><br><span class="line">abc</span><br></pre></td></tr></table></figure>
<h3 id="文本模式"><a href="#文本模式" class="headerlink" title="文本模式"></a>文本模式</h3><ul>
<li>读取.read_text</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">49</span>]: p2.read_text()</span><br><span class="line">Out[<span class="number">49</span>]: <span class="string">'BOOTPROTO=static\nDEVICE=ens34\nONBOOT=yes\nIPADDR=192.168.100.253\nNETMASK=255.255.255.0\n'</span></span><br></pre></td></tr></table></figure>
<ul>
<li>写入.write_text</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">535</span>]: ll</span><br><span class="line">总用量 <span class="number">0</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">536</span>]: p5</span><br><span class="line">Out[<span class="number">536</span>]: PosixPath(<span class="string">'/tmp/test'</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">537</span>]: p5.write_text(<span class="string">'你好'</span>)</span><br><span class="line">Out[<span class="number">537</span>]: <span class="number">2</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">538</span>]: cat test</span><br><span class="line">你好</span><br></pre></td></tr></table></figure>
<h2 id="显示链接文件属性-lstat"><a href="#显示链接文件属性-lstat" class="headerlink" title="显示链接文件属性.lstat"></a>显示链接文件属性.lstat</h2><p>文件如果为链接文件则显示链接文件的属性</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">405</span>]: p2.lstat()</span><br><span class="line">Out[<span class="number">405</span>]: os.stat_result(st_mode=<span class="number">33261</span>, st_ino=<span class="number">34651681</span>, st_dev=<span class="number">2052</span>, st_nlink=<span class="number">1</span>, st_uid=<span class="number">1000</span>, st_gid=<span class="number">1000</span>, st_size=<span class="number">13099</span>, st_atime=<span class="number">1524531777</span>, st_mtime=<span class="number">1508733030</span>, st_ctime=<span class="number">1524568268</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">406</span>]: p2</span><br><span class="line">Out[<span class="number">406</span>]: PosixPath(<span class="string">'/home/python/magedu/projects/test/sample.txt'</span>)</span><br></pre></td></tr></table></figure>
<h2 id="显示文件详细属性-stat"><a href="#显示文件详细属性-stat" class="headerlink" title="显示文件详细属性.stat"></a>显示文件详细属性.stat</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">360</span>]: p5.stat()</span><br><span class="line">Out[<span class="number">360</span>]: os.stat_result(st_mode=<span class="number">33204</span>, st_ino=<span class="number">17029845</span>, st_dev=<span class="number">2052</span>, st_nlink=<span class="number">1</span>, st_uid=<span class="number">1000</span>, st_gid=<span class="number">1000</span>, st_size=<span class="number">0</span>, st_atime=<span class="number">1524622003</span>, st_mtime=<span class="number">1524622003</span>, st_ctime=<span class="number">1524622003</span>)</span><br></pre></td></tr></table></figure>
<h2 id="创建空文件更新时间戳-touch"><a href="#创建空文件更新时间戳-touch" class="headerlink" title="创建空文件更新时间戳.touch"></a>创建空文件更新时间戳.touch</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">433</span>]: p4</span><br><span class="line">Out[<span class="number">433</span>]: PosixPath(<span class="string">'/tmp/test'</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">436</span>]: p4.touch()</span><br><span class="line"></span><br><span class="line">In [<span class="number">437</span>]: ll</span><br><span class="line">总用量 <span class="number">0</span></span><br><span class="line">-rw-rw-r-- <span class="number">1</span> python <span class="number">0</span> <span class="number">4</span>月  <span class="number">25</span> <span class="number">10</span>:<span class="number">23</span> test</span><br></pre></td></tr></table></figure>
<h2 id="修改文件名称-rename"><a href="#修改文件名称-rename" class="headerlink" title="修改文件名称.rename"></a>修改文件名称.rename</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">166</span>]: p4</span><br><span class="line">Out[<span class="number">166</span>]: PosixPath(<span class="string">'test1'</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">167</span>]: p4.rename(<span class="string">'test2'</span>)</span><br></pre></td></tr></table></figure>
<h2 id="移动或改名-replace"><a href="#移动或改名-replace" class="headerlink" title="移动或改名.replace"></a>移动或改名.replace</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">217</span>]: ll</span><br><span class="line">总用量 <span class="number">0</span></span><br><span class="line">drwxrwxr-x <span class="number">3</span> python <span class="number">22</span> <span class="number">3</span>月   <span class="number">6</span> <span class="number">09</span>:<span class="number">47</span> magedu/</span><br><span class="line">---------- <span class="number">1</span> python  <span class="number">0</span> <span class="number">4</span>月  <span class="number">24</span> <span class="number">20</span>:<span class="number">05</span> test</span><br><span class="line"></span><br><span class="line">In [<span class="number">218</span>]: p4 = Path(<span class="string">'./test'</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">219</span>]: p4.replace(<span class="string">'/tmp/test'</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">220</span>]: ll</span><br><span class="line">总用量 <span class="number">0</span></span><br><span class="line">drwxrwxr-x <span class="number">3</span> python <span class="number">22</span> <span class="number">3</span>月   <span class="number">6</span> <span class="number">09</span>:<span class="number">47</span> magedu/</span><br></pre></td></tr></table></figure>
<h2 id="新建链接指向目标-symlink-to"><a href="#新建链接指向目标-symlink-to" class="headerlink" title="新建链接指向目标.symlink_to"></a>新建链接指向目标.symlink_to</h2><figure class="highlight"><table><tr><td class="code"><pre><span class="line">In [<span class="number">422</span>]: p4 = Path(<span class="string">'/tmp/test'</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">423</span>]: p4.symlink_to(<span class="string">'/etc/rc.local'</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">424</span>]: ll</span><br><span class="line">总用量 <span class="number">0</span></span><br><span class="line">lrwxrwxrwx 1 python 13 4月  25 10:21 test -&gt; /etc/rc.local*</span><br></pre></td></tr></table></figure>
<h2 id="解析软连接位置-resolve"><a href="#解析软连接位置-resolve" class="headerlink" title="解析软连接位置.resolve"></a>解析软连接位置.resolve</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">261</span>]: ll</span><br><span class="line">总用量 <span class="number">0</span></span><br><span class="line">lrwxrwxrwx 1 python 42 4月  25 09:59 ifcfg-ens34 -&gt; /etc/sysconfig/network-scripts/ifcfg-ens34</span><br><span class="line">drwxrwxr-x <span class="number">3</span> python <span class="number">22</span> <span class="number">3</span>月   <span class="number">6</span> <span class="number">09</span>:<span class="number">47</span> magedu/</span><br><span class="line">-rw-rw-r-- <span class="number">1</span> python  <span class="number">0</span> <span class="number">4</span>月  <span class="number">25</span> <span class="number">09</span>:<span class="number">58</span> test</span><br><span class="line"></span><br><span class="line">In [<span class="number">263</span>]: p4 = Path(<span class="string">'ifcfg-ens34'</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">264</span>]: p4.resolve()</span><br><span class="line">Out[<span class="number">264</span>]: PosixPath(<span class="string">'/etc/sysconfig/network-scripts/ifcfg-ens34'</span>)</span><br></pre></td></tr></table></figure>
<h2 id="删除文件或取消链接-unlink"><a href="#删除文件或取消链接-unlink" class="headerlink" title="删除文件或取消链接.unlink"></a>删除文件或取消链接.unlink</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">491</span>]: ll</span><br><span class="line">总用量 <span class="number">0</span></span><br><span class="line">-rw-rw-r-- <span class="number">1</span> python <span class="number">0</span> <span class="number">4</span>月  <span class="number">25</span> <span class="number">10</span>:<span class="number">31</span> test</span><br><span class="line"></span><br><span class="line">In [<span class="number">492</span>]: p4</span><br><span class="line">Out[<span class="number">492</span>]: PosixPath(<span class="string">'/tmp/test'</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">494</span>]: p4.unlink()</span><br><span class="line"></span><br><span class="line">In [<span class="number">495</span>]: ll</span><br><span class="line">总用量 <span class="number">0</span></span><br></pre></td></tr></table></figure>
<h2 id="文件权限-chmod"><a href="#文件权限-chmod" class="headerlink" title="文件权限.chmod"></a>文件权限.chmod</h2><p>接受一个十进制的权限描述</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">101</span>]: p2.chmod(<span class="number">493</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">102</span>]: ll</span><br><span class="line">总用量 <span class="number">16</span></span><br><span class="line">-rwxr-xr-x <span class="number">1</span> python <span class="number">13099</span> <span class="number">10</span>月 <span class="number">23</span> <span class="number">2017</span> sample.txt*</span><br></pre></td></tr></table></figure>
<h2 id="链接文件权限-lchmod"><a href="#链接文件权限-lchmod" class="headerlink" title="链接文件权限.lchmod"></a>链接文件权限.lchmod</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h1 id="文件复制shutil"><a href="#文件复制shutil" class="headerlink" title="文件复制shutil"></a>文件复制shutil</h1><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> shutil</span><br></pre></td></tr></table></figure>
<h2 id="返回sh命令位置-which"><a href="#返回sh命令位置-which" class="headerlink" title="返回sh命令位置.which"></a>返回sh命令位置.which</h2><p>语法: <code>shutil.which(cmd, mode=os.F_OK | os.X_OK, path=None)</code></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">106</span>]: shutil.which(<span class="string">'copy'</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">107</span>]: shutil.which(<span class="string">'cat'</span>)</span><br><span class="line">Out[<span class="number">107</span>]: <span class="string">'/usr/bin/cat'</span></span><br></pre></td></tr></table></figure>
<h2 id="复制文件-copyfile"><a href="#复制文件-copyfile" class="headerlink" title="复制文件.copyfile"></a>复制文件.copyfile</h2><p>默认从指定源复制到目标，如果 <code>follow_symlinks=False</code> 则复制仅复制链接。</p>
<p>语法: <code>shutil.copyfile(src, dst, *, follow_symlinks=True)</code></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">34</span>]: shutil.copyfile(<span class="string">'sample.txt'</span>,<span class="string">'sample.txt.bak'</span>)</span><br><span class="line">Out[<span class="number">34</span>]: <span class="string">'sample.txt.bak'</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">35</span>]: ll</span><br><span class="line">总用量 <span class="number">32</span></span><br><span class="line">-rwxr-xr-x <span class="number">1</span> python <span class="number">13099</span> <span class="number">10</span>月 <span class="number">23</span> <span class="number">2017</span> sample.txt*</span><br><span class="line">-rw-rw-r-- <span class="number">1</span> python <span class="number">13099</span> <span class="number">4</span>月  <span class="number">25</span> <span class="number">14</span>:<span class="number">25</span> sample.txt.bak</span><br><span class="line">drwxrwxr-x <span class="number">2</span> python     <span class="number">6</span> <span class="number">4</span>月  <span class="number">25</span> <span class="number">09</span>:<span class="number">01</span> test/</span><br></pre></td></tr></table></figure>
<h2 id="从指针处复制文件-copyfileobj"><a href="#从指针处复制文件-copyfileobj" class="headerlink" title="从指针处复制文件.copyfileobj"></a>从指针处复制文件.copyfileobj</h2><p>语法: <code>shutil.copyfileobj(fsrc, fdst[, length])</code></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">8</span>]: <span class="keyword">with</span> open(<span class="string">'sample.txt'</span>,<span class="string">'r+'</span>) <span class="keyword">as</span> file1:</span><br><span class="line">   ...:     file1.seek(<span class="number">200</span>)</span><br><span class="line">   ...:     <span class="keyword">with</span> open(<span class="string">'sample.txt.bak'</span>,<span class="string">'w+'</span>) <span class="keyword">as</span> file2:</span><br><span class="line">   ...:         <span class="keyword">import</span> shutil</span><br><span class="line">   ...:         shutil.copyfileobj(file1,file2)</span><br></pre></td></tr></table></figure>
<h2 id="复制文件-copy"><a href="#复制文件-copy" class="headerlink" title="复制文件.copy"></a>复制文件.copy</h2><blockquote>
<p>仅复制文件不能复制目录</p>
</blockquote>
<p>复制文件到目标，如果目标为目录则复制到目标目录中。<code>(copyfile函数如果目标为目录会报错)</code></p>
<p>语法: <code>shutil.copy(src, dst, *, follow_symlinks=True)</code></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">135</span>]: shutil.copy(<span class="string">'sample.txt'</span>,<span class="string">'test'</span>)</span><br><span class="line">Out[<span class="number">135</span>]: <span class="string">'test/sample.txt'</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">136</span>]: ll</span><br><span class="line">总用量 <span class="number">32</span></span><br><span class="line">-rw-r--r-- <span class="number">1</span> python <span class="number">13099</span> <span class="number">4</span>月  <span class="number">25</span> <span class="number">14</span>:<span class="number">33</span> sample.txt</span><br><span class="line">-rw-r--r-- <span class="number">1</span> python <span class="number">13099</span> <span class="number">4</span>月  <span class="number">25</span> <span class="number">14</span>:<span class="number">33</span> sample.txt.bak</span><br><span class="line">lrwxrwxrwx 1 python    10 4月  25 14:25 sample.txt.lnk -&gt; sample.txt</span><br><span class="line">drwxrwxr-x <span class="number">2</span> python    <span class="number">24</span> <span class="number">4</span>月  <span class="number">25</span> <span class="number">14</span>:<span class="number">50</span> test/</span><br><span class="line"></span><br><span class="line">In [<span class="number">137</span>]: ll test/</span><br><span class="line">总用量 <span class="number">16</span></span><br><span class="line">-rw-r--r-- <span class="number">1</span> python <span class="number">13099</span> <span class="number">4</span>月  <span class="number">25</span> <span class="number">14</span>:<span class="number">50</span> sample.txt</span><br></pre></td></tr></table></figure>
<h2 id="复制文件元数据-copy2"><a href="#复制文件元数据-copy2" class="headerlink" title="复制文件元数据.copy2"></a>复制文件元数据.copy2</h2><blockquote>
<p> 仅复制文件不能复制目录</p>
</blockquote>
<p>语法: <code>shutil.copy2(src, dst, *, follow_symlinks=True)</code></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">146</span>]: shutil.copy2(<span class="string">'sample.txt'</span>,<span class="string">'test'</span>)</span><br><span class="line">Out[<span class="number">146</span>]: <span class="string">'test/sample.txt'</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">147</span>]: ll ./sample.txt ./test/sample.txt</span><br><span class="line">-rw-r--r-- <span class="number">1</span> python <span class="number">13099</span> <span class="number">4</span>月  <span class="number">25</span> <span class="number">14</span>:<span class="number">33</span> ./sample.txt</span><br><span class="line">-rw-r--r-- <span class="number">1</span> python <span class="number">13099</span> <span class="number">4</span>月  <span class="number">25</span> <span class="number">14</span>:<span class="number">33</span> ./test/sample.txt</span><br></pre></td></tr></table></figure>
<h2 id="递归复制目录-copytree"><a href="#递归复制目录-copytree" class="headerlink" title="递归复制目录.copytree"></a>递归复制目录.copytree</h2><p>递归的复制一个目录，目标目录存在则报错。</p>
<p>语法: <code>shutil.copytree(src, dst, symlinks=False, ignore=None, copy_function=copy2, ignore_dangling_symlinks=False)</code></p>
<p><code>copy_function</code> 指定复制函数，它必须是可用于复制每个文件的可调用函数。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">4</span>]: ll project/</span><br><span class="line">总用量 <span class="number">0</span></span><br><span class="line">drwxrwxr-x <span class="number">2</span> python <span class="number">6</span> <span class="number">4</span>月  <span class="number">25</span> <span class="number">15</span>:<span class="number">15</span> <span class="number">0</span>/</span><br><span class="line">drwxrwxr-x <span class="number">2</span> python <span class="number">6</span> <span class="number">4</span>月  <span class="number">25</span> <span class="number">15</span>:<span class="number">15</span> <span class="number">1</span>/</span><br><span class="line">drwxrwxr-x <span class="number">2</span> python <span class="number">6</span> <span class="number">4</span>月  <span class="number">25</span> <span class="number">15</span>:<span class="number">15</span> <span class="number">2</span>/</span><br><span class="line">drwxrwxr-x <span class="number">2</span> python <span class="number">6</span> <span class="number">4</span>月  <span class="number">25</span> <span class="number">15</span>:<span class="number">15</span> <span class="number">3</span>/</span><br><span class="line">drwxrwxr-x <span class="number">2</span> python <span class="number">6</span> <span class="number">4</span>月  <span class="number">25</span> <span class="number">15</span>:<span class="number">15</span> <span class="number">4</span>/</span><br><span class="line">-rw-rw-r-- <span class="number">1</span> python <span class="number">0</span> <span class="number">4</span>月  <span class="number">25</span> <span class="number">15</span>:<span class="number">15</span> <span class="number">5</span></span><br><span class="line">-rw-rw-r-- <span class="number">1</span> python <span class="number">0</span> <span class="number">4</span>月  <span class="number">25</span> <span class="number">15</span>:<span class="number">15</span> <span class="number">6</span></span><br><span class="line">-rw-rw-r-- <span class="number">1</span> python <span class="number">0</span> <span class="number">4</span>月  <span class="number">25</span> <span class="number">15</span>:<span class="number">15</span> <span class="number">7</span></span><br><span class="line">-rw-rw-r-- <span class="number">1</span> python <span class="number">0</span> <span class="number">4</span>月  <span class="number">25</span> <span class="number">15</span>:<span class="number">15</span> <span class="number">8</span></span><br><span class="line">-rw-rw-r-- <span class="number">1</span> python <span class="number">0</span> <span class="number">4</span>月  <span class="number">25</span> <span class="number">15</span>:<span class="number">15</span> <span class="number">9</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">9</span>]: shutil.copytree(<span class="string">'project'</span>,<span class="string">'project.bak'</span>,ignore=shutil.ignore_patterns(<span class="string">'0'</span>,<span class="string">'9'</span>))</span><br><span class="line">Out[<span class="number">9</span>]: <span class="string">'project.bak'</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">10</span>]: ll project.bak/</span><br><span class="line">总用量 <span class="number">0</span></span><br><span class="line">drwxrwxr-x <span class="number">2</span> python <span class="number">6</span> <span class="number">4</span>月  <span class="number">25</span> <span class="number">15</span>:<span class="number">15</span> <span class="number">1</span>/</span><br><span class="line">drwxrwxr-x <span class="number">2</span> python <span class="number">6</span> <span class="number">4</span>月  <span class="number">25</span> <span class="number">15</span>:<span class="number">15</span> <span class="number">2</span>/</span><br><span class="line">drwxrwxr-x <span class="number">2</span> python <span class="number">6</span> <span class="number">4</span>月  <span class="number">25</span> <span class="number">15</span>:<span class="number">15</span> <span class="number">3</span>/</span><br><span class="line">drwxrwxr-x <span class="number">2</span> python <span class="number">6</span> <span class="number">4</span>月  <span class="number">25</span> <span class="number">15</span>:<span class="number">15</span> <span class="number">4</span>/</span><br><span class="line">-rw-rw-r-- <span class="number">1</span> python <span class="number">0</span> <span class="number">4</span>月  <span class="number">25</span> <span class="number">15</span>:<span class="number">15</span> <span class="number">5</span></span><br><span class="line">-rw-rw-r-- <span class="number">1</span> python <span class="number">0</span> <span class="number">4</span>月  <span class="number">25</span> <span class="number">15</span>:<span class="number">15</span> <span class="number">6</span></span><br><span class="line">-rw-rw-r-- <span class="number">1</span> python <span class="number">0</span> <span class="number">4</span>月  <span class="number">25</span> <span class="number">15</span>:<span class="number">15</span> <span class="number">7</span></span><br><span class="line">-rw-rw-r-- <span class="number">1</span> python <span class="number">0</span> <span class="number">4</span>月  <span class="number">25</span> <span class="number">15</span>:<span class="number">15</span> <span class="number">8</span></span><br></pre></td></tr></table></figure>
<ul>
<li>忽略参数.ignore_patterns</li>
</ul>
<p>可以为 <code>copytree</code> 函数的 <code>ignore</code> 参数提供忽略的内容</p>
<p>语法: <code>shutil.ignore_patterns(*patterns)</code></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">shutil.ignore_patterns(<span class="string">'file1'</span>,<span class="string">'file2'</span>)</span><br></pre></td></tr></table></figure>
<h2 id="递归删除目录-rmtree"><a href="#递归删除目录-rmtree" class="headerlink" title="递归删除目录.rmtree"></a>递归删除目录.rmtree</h2><p>语法: <code>shutil.rmtree(path, ignore_errors=False, onerror=None)</code></p>
<p><code>ignore_errors=True</code> 忽略删除过程中出现的错误</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">12</span>]: ll</span><br><span class="line">总用量 <span class="number">32</span></span><br><span class="line">drwxrwxr-x <span class="number">7</span> python    <span class="number">96</span> <span class="number">4</span>月  <span class="number">25</span> <span class="number">15</span>:<span class="number">15</span> project/</span><br><span class="line">drwxrwxr-x <span class="number">6</span> python    <span class="number">78</span> <span class="number">4</span>月  <span class="number">25</span> <span class="number">15</span>:<span class="number">15</span> project.bak/</span><br><span class="line">-rw-r--r-- <span class="number">1</span> python <span class="number">13099</span> <span class="number">4</span>月  <span class="number">25</span> <span class="number">14</span>:<span class="number">33</span> sample.txt</span><br><span class="line">-rw-r--r-- <span class="number">1</span> python <span class="number">13099</span> <span class="number">4</span>月  <span class="number">25</span> <span class="number">14</span>:<span class="number">33</span> sample.txt.bak</span><br><span class="line">lrwxrwxrwx 1 python    10 4月  25 14:25 sample.txt.lnk -&gt; sample.txt</span><br><span class="line">drwxrwxr-x <span class="number">2</span> python    <span class="number">24</span> <span class="number">4</span>月  <span class="number">25</span> <span class="number">14</span>:<span class="number">54</span> test/</span><br><span class="line"></span><br><span class="line">In [<span class="number">14</span>]: shutil.rmtree(<span class="string">'project.bak'</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">15</span>]: ll</span><br><span class="line">总用量 <span class="number">32</span></span><br><span class="line">drwxrwxr-x <span class="number">7</span> python    <span class="number">96</span> <span class="number">4</span>月  <span class="number">25</span> <span class="number">15</span>:<span class="number">15</span> project/</span><br><span class="line">-rw-r--r-- <span class="number">1</span> python <span class="number">13099</span> <span class="number">4</span>月  <span class="number">25</span> <span class="number">14</span>:<span class="number">33</span> sample.txt</span><br><span class="line">-rw-r--r-- <span class="number">1</span> python <span class="number">13099</span> <span class="number">4</span>月  <span class="number">25</span> <span class="number">14</span>:<span class="number">33</span> sample.txt.bak</span><br><span class="line">lrwxrwxrwx 1 python    10 4月  25 14:25 sample.txt.lnk -&gt; sample.txt</span><br><span class="line">drwxrwxr-x <span class="number">2</span> python    <span class="number">24</span> <span class="number">4</span>月  <span class="number">25</span> <span class="number">14</span>:<span class="number">54</span> test/</span><br></pre></td></tr></table></figure>
<h2 id="权限复制-copymode"><a href="#权限复制-copymode" class="headerlink" title="权限复制.copymode"></a>权限复制.copymode</h2><p>两个文件之间的权限复制，从文件到目录，从目录到文件皆可。</p>
<p>复制文件的权限到另外的文件，注意：软链接文件权限不可以修改，（默认777）</p>
<p>语法: <code>shutil.copymode(src, dst, *, follow_symlinks=True)</code></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">100</span>]: ll</span><br><span class="line">总用量 <span class="number">32</span></span><br><span class="line">-rw-r--r-- <span class="number">1</span> python <span class="number">13099</span> <span class="number">4</span>月  <span class="number">25</span> <span class="number">14</span>:<span class="number">33</span> sample.txt</span><br><span class="line">---------- <span class="number">1</span> python <span class="number">13099</span> <span class="number">4</span>月  <span class="number">25</span> <span class="number">14</span>:<span class="number">33</span> sample.txt.bak</span><br><span class="line">lrwxrwxrwx 1 python    10 4月  25 14:25 sample.txt.lnk -&gt; sample.txt</span><br><span class="line">drwxrwxr-x <span class="number">2</span> python     <span class="number">6</span> <span class="number">4</span>月  <span class="number">25</span> <span class="number">14</span>:<span class="number">33</span> test/</span><br><span class="line"></span><br><span class="line">In [<span class="number">108</span>]: shutil.copymode(<span class="string">'sample.txt'</span>,<span class="string">'sample.txt.bak'</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">109</span>]: ll</span><br><span class="line">总用量 <span class="number">32</span></span><br><span class="line">-rw-r--r-- <span class="number">1</span> python <span class="number">13099</span> <span class="number">4</span>月  <span class="number">25</span> <span class="number">14</span>:<span class="number">33</span> sample.txt</span><br><span class="line">-rw-r--r-- <span class="number">1</span> python <span class="number">13099</span> <span class="number">4</span>月  <span class="number">25</span> <span class="number">14</span>:<span class="number">33</span> sample.txt.bak</span><br><span class="line">lrwxrwxrwx 1 python    10 4月  25 14:25 sample.txt.lnk -&gt; sample.txt</span><br><span class="line">drwxrwxr-x <span class="number">2</span> python     <span class="number">6</span> <span class="number">4</span>月  <span class="number">25</span> <span class="number">14</span>:<span class="number">33</span> test/</span><br></pre></td></tr></table></figure>
<h2 id="元数据复制-copystat"><a href="#元数据复制-copystat" class="headerlink" title="元数据复制.copystat"></a>元数据复制.copystat</h2><p>两个文件之间的元数据复制，从文件到目录，从目录到文件皆可。</p>
<p>语法: <code>shutil.copystat(src, dst, *, follow_symlinks=True)</code></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">124</span>]: !chmod <span class="number">000</span> sample.txt.bak</span><br><span class="line">    </span><br><span class="line">In [<span class="number">121</span>]: ll</span><br><span class="line">总用量 <span class="number">32</span></span><br><span class="line">-rw-r--r-- <span class="number">1</span> python <span class="number">13099</span> <span class="number">4</span>月  <span class="number">25</span> <span class="number">14</span>:<span class="number">33</span> sample.txt</span><br><span class="line">---------- <span class="number">1</span> python <span class="number">13099</span> <span class="number">4</span>月  <span class="number">25</span> <span class="number">14</span>:<span class="number">39</span> sample.txt.bak</span><br><span class="line">lrwxrwxrwx 1 python    10 4月  25 14:25 sample.txt.lnk -&gt; sample.txt</span><br><span class="line">drwxrwxr-x <span class="number">2</span> python     <span class="number">6</span> <span class="number">4</span>月  <span class="number">25</span> <span class="number">14</span>:<span class="number">33</span> test/</span><br><span class="line"></span><br><span class="line">In [<span class="number">125</span>]: shutil.copystat(<span class="string">'sample.txt'</span>,<span class="string">'sample.txt.bak'</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">126</span>]: ll</span><br><span class="line">总用量 <span class="number">32</span></span><br><span class="line">-rw-r--r-- <span class="number">1</span> python <span class="number">13099</span> <span class="number">4</span>月  <span class="number">25</span> <span class="number">14</span>:<span class="number">33</span> sample.txt</span><br><span class="line">-rw-r--r-- <span class="number">1</span> python <span class="number">13099</span> <span class="number">4</span>月  <span class="number">25</span> <span class="number">14</span>:<span class="number">33</span> sample.txt.bak</span><br><span class="line">lrwxrwxrwx 1 python    10 4月  25 14:25 sample.txt.lnk -&gt; sample.txt</span><br><span class="line">drwxrwxr-x <span class="number">2</span> python     <span class="number">6</span> <span class="number">4</span>月  <span class="number">25</span> <span class="number">14</span>:<span class="number">33</span> test/</span><br></pre></td></tr></table></figure>
<h2 id="移动文件或目录-move"><a href="#移动文件或目录-move" class="headerlink" title="移动文件或目录.move"></a>移动文件或目录.move</h2><p>语法: <code>shutil.move(src, dst, copy_function=copy2)</code></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">32</span>]: ll</span><br><span class="line">总用量 <span class="number">32</span></span><br><span class="line">drwxrwxr-x <span class="number">7</span> python    <span class="number">96</span> <span class="number">4</span>月  <span class="number">25</span> <span class="number">15</span>:<span class="number">15</span> project/</span><br><span class="line">-rw-r--r-- <span class="number">1</span> python <span class="number">13099</span> <span class="number">4</span>月  <span class="number">25</span> <span class="number">14</span>:<span class="number">33</span> sample.txt</span><br><span class="line">-rw-r--r-- <span class="number">1</span> python <span class="number">13099</span> <span class="number">4</span>月  <span class="number">25</span> <span class="number">14</span>:<span class="number">33</span> sample.txt.bak</span><br><span class="line">lrwxrwxrwx 1 python    10 4月  25 14:25 sample.txt.lnk -&gt; sample.txt</span><br><span class="line">drwxrwxr-x <span class="number">2</span> python    <span class="number">24</span> <span class="number">4</span>月  <span class="number">25</span> <span class="number">14</span>:<span class="number">54</span> test/</span><br><span class="line"></span><br><span class="line">In [<span class="number">34</span>]: shutil.move(<span class="string">'project'</span>,<span class="string">'test'</span>)</span><br><span class="line">Out[<span class="number">34</span>]: <span class="string">'test/project'</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">36</span>]: ll test/</span><br><span class="line">总用量 <span class="number">16</span></span><br><span class="line">drwxrwxr-x <span class="number">7</span> python    <span class="number">96</span> <span class="number">4</span>月  <span class="number">25</span> <span class="number">15</span>:<span class="number">15</span> project/</span><br><span class="line">-rw-r--r-- <span class="number">1</span> python <span class="number">13099</span> <span class="number">4</span>月  <span class="number">25</span> <span class="number">14</span>:<span class="number">33</span> sample.txt</span><br><span class="line"></span><br><span class="line">In [<span class="number">37</span>]: shutil.move(<span class="string">'test/project'</span>,<span class="string">'./'</span>)</span><br><span class="line">Out[<span class="number">37</span>]: <span class="string">'./project'</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">38</span>]: ll</span><br><span class="line">总用量 <span class="number">32</span></span><br><span class="line">drwxrwxr-x <span class="number">7</span> python    <span class="number">96</span> <span class="number">4</span>月  <span class="number">25</span> <span class="number">15</span>:<span class="number">15</span> project/</span><br><span class="line">-rw-r--r-- <span class="number">1</span> python <span class="number">13099</span> <span class="number">4</span>月  <span class="number">25</span> <span class="number">14</span>:<span class="number">33</span> sample.txt</span><br><span class="line">-rw-r--r-- <span class="number">1</span> python <span class="number">13099</span> <span class="number">4</span>月  <span class="number">25</span> <span class="number">14</span>:<span class="number">33</span> sample.txt.bak</span><br><span class="line">lrwxrwxrwx 1 python    10 4月  25 14:25 sample.txt.lnk -&gt; sample.txt</span><br><span class="line">drwxrwxr-x <span class="number">2</span> python    <span class="number">24</span> <span class="number">4</span>月  <span class="number">25</span> <span class="number">15</span>:<span class="number">30</span> test/</span><br></pre></td></tr></table></figure>
<h2 id="磁盘使用量-disk-usage"><a href="#磁盘使用量-disk-usage" class="headerlink" title="磁盘使用量.disk_usage"></a>磁盘使用量.disk_usage</h2><p>语法: <code>shutil.disk_usage(path)</code></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">51</span>]: shutil.disk_usage(<span class="string">'/'</span>)</span><br><span class="line">Out[<span class="number">51</span>]: usage(total=<span class="number">19641925632</span>, used=<span class="number">2332303360</span>, free=<span class="number">17309622272</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">52</span>]: shutil.disk_usage(<span class="string">'/dev'</span>)</span><br><span class="line">Out[<span class="number">52</span>]: usage(total=<span class="number">236752896</span>, used=<span class="number">0</span>, free=<span class="number">236752896</span>)</span><br></pre></td></tr></table></figure>
<h2 id="修改文件属主属组-chown"><a href="#修改文件属主属组-chown" class="headerlink" title="修改文件属主属组.chown"></a>修改文件属主属组.chown</h2><p>语法: <code>shutil.chown(path, user=None, group=None)</code></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">[root@localhost tmp]<span class="comment"># ll</span></span><br><span class="line">总用量 <span class="number">4</span></span><br><span class="line">-rw-rw-r-- <span class="number">1</span> python python <span class="number">6</span> <span class="number">4</span>月  <span class="number">25</span> <span class="number">10</span>:<span class="number">40</span> test</span><br><span class="line">[root@localhost bin]<span class="comment"># python3</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> shutil</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>shutil.chown(<span class="string">'/tmp/test'</span>,user=<span class="string">'rooot'</span>,group=<span class="string">'root'</span>)</span><br><span class="line">[root@localhost tmp]<span class="comment"># ll</span></span><br><span class="line">总用量 <span class="number">4</span></span><br><span class="line">-rw-rw-r-- <span class="number">1</span> root root <span class="number">6</span> <span class="number">4</span>月  <span class="number">25</span> <span class="number">10</span>:<span class="number">40</span> test</span><br></pre></td></tr></table></figure>
<h1 id="文件打包shutil"><a href="#文件打包shutil" class="headerlink" title="文件打包shutil"></a>文件打包shutil</h1><h2 id="打包文件-make-archive"><a href="#打包文件-make-archive" class="headerlink" title="打包文件.make_archive"></a>打包文件.make_archive</h2><p>语法: <code>shutil.make_archive(base_name, format[, root_dir[, base_dir[, verbose[, dry_run[, owner[, group[, logger]]]]]]])</code></p>
<ul>
<li>将 <code>/etc</code> 目录以 <code>.tar.gz</code> 格式打包，放在<code>/tmp/mytar</code></li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">289</span>]: shutil.make_archive(<span class="string">'/tmp/mytar'</span>,<span class="string">'gztar'</span>,root_dir=<span class="string">'/etc'</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">290</span>]: ll</span><br><span class="line">总用量 <span class="number">4</span></span><br><span class="line">-rw-rw-r-- <span class="number">1</span> python <span class="number">493</span> <span class="number">4</span>月  <span class="number">25</span> <span class="number">16</span>:<span class="number">32</span> mytar.tar.gz</span><br></pre></td></tr></table></figure>
<h2 id="解包文件-unpack-archive"><a href="#解包文件-unpack-archive" class="headerlink" title="解包文件.unpack_archive"></a>解包文件.unpack_archive</h2><p>语法: <code>shutil.unpack_archive(filename[, extract_dir[, format]])</code></p>
<ul>
<li>将 <code>/tmp/mytar.tar.gz</code> 文件解压到 <code>/home/python</code> 格式为：<code>gztar</code></li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">299</span>]: shutil.unpack_archive(<span class="string">'/tmp/mytar.tar.gz'</span>,<span class="string">'/home/python'</span>,<span class="string">'gztar'</span>)</span><br></pre></td></tr></table></figure>
<h2 id="存档格式-get-archive-formats"><a href="#存档格式-get-archive-formats" class="headerlink" title="存档格式.get_archive_formats"></a>存档格式.get_archive_formats</h2><p>显示支持的存档格式</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">109</span>]: shutil.get_archive_formats()</span><br><span class="line">Out[<span class="number">109</span>]: </span><br><span class="line">[(<span class="string">'bztar'</span>, <span class="string">"bzip2'ed tar-file"</span>),</span><br><span class="line"> (<span class="string">'gztar'</span>, <span class="string">"gzip'ed tar-file"</span>),</span><br><span class="line"> (<span class="string">'tar'</span>, <span class="string">'uncompressed tar file'</span>),</span><br><span class="line"> (<span class="string">'zip'</span>, <span class="string">'ZIP file'</span>)]</span><br></pre></td></tr></table></figure>
<h2 id="解包格式-get-unpack-formats"><a href="#解包格式-get-unpack-formats" class="headerlink" title="解包格式.get_unpack_formats"></a>解包格式.get_unpack_formats</h2><p>显示支持的解包格式</p>
<p>语法: <code>shutil.unregister_unpack_format(name)</code></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">303</span>]: shutil.get_unpack_formats()</span><br><span class="line">Out[<span class="number">303</span>]: </span><br><span class="line">[(<span class="string">'bztar'</span>, [<span class="string">'.tar.bz2'</span>, <span class="string">'.tbz2'</span>], <span class="string">"bzip2'ed tar-file"</span>),</span><br><span class="line"> (<span class="string">'gztar'</span>, [<span class="string">'.tar.gz'</span>, <span class="string">'.tgz'</span>], <span class="string">"gzip'ed tar-file"</span>),</span><br><span class="line"> (<span class="string">'tar'</span>, [<span class="string">'.tar'</span>], <span class="string">'uncompressed tar file'</span>),</span><br><span class="line"> (<span class="string">'zip'</span>, [<span class="string">'.zip'</span>], <span class="string">'ZIP file'</span>)]</span><br></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://yangjinheng.github.io/2017/09/21/python/12.文件IO/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Jin Heng">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="默默">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/09/21/python/12.文件IO/" itemprop="url">文件I/O</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-09-21T00:00:00+08:00">
                2017-09-21
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/Python/" itemprop="url" rel="index">
                    <span itemprop="name">Python</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="文件IO"><a href="#文件IO" class="headerlink" title="文件IO"></a>文件IO</h1><h2 id="文件的操作"><a href="#文件的操作" class="headerlink" title="文件的操作"></a>文件的操作</h2><h3 id="创建文件-open"><a href="#创建文件-open" class="headerlink" title="创建文件.open()"></a>创建文件.open()</h3><p>打开文件和创建文件对象，文件属于可迭代对象。</p>
<h4 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h4><p><code>open(file, mode=&#39;r&#39;, buffering=-1, encoding=None, errors=None, newline=None, closefd=True, opener=None)</code></p>
<h4 id="参数"><a href="#参数" class="headerlink" title="参数"></a>参数</h4><ul>
<li><code>file</code> 文件路径或者打开文件的描述符，必须的参数。</li>
</ul>
<ul>
<li><code>mode</code> 文件的打开模式</li>
</ul>
<table>
<thead>
<tr>
<th>模式</th>
<th>作用</th>
</tr>
</thead>
<tbody>
<tr>
<td>r</td>
<td>读模式（默认）</td>
</tr>
<tr>
<td>w</td>
<td>写模式，从首部直接覆盖文件</td>
</tr>
<tr>
<td>x</td>
<td>创建并写入一个新文件</td>
</tr>
<tr>
<td>a</td>
<td>追加模式</td>
</tr>
<tr>
<td>b</td>
<td>二进制模式，配合 <code>rw</code> 等参数使用</td>
</tr>
<tr>
<td>t</td>
<td>文本模式（默认）</td>
</tr>
<tr>
<td>+</td>
<td>读写模式，补全缺失的模式</td>
</tr>
</tbody>
</table>
<ul>
<li><code>buffering</code> 设置缓冲的策略，正数表示使用指定大小的缓冲</li>
</ul>
<table>
<thead>
<tr>
<th>参数</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>表示禁用缓冲</td>
</tr>
<tr>
<td>负数</td>
<td>表示使用系统默认缓冲</td>
</tr>
<tr>
<td>1</td>
<td>表示缓冲一行数据</td>
</tr>
<tr>
<td>大于1</td>
<td>表示指定大小的缓冲。</td>
</tr>
</tbody>
</table>
<ul>
<li><code>encoding</code> 文本文件的编码设置，windows 默认：GBK，LINUX默认：UTF-8。</li>
<li><code>errors</code> 指定编码错误的可选字符串。</li>
<li><code>newline</code> 控制通用换行符的工作方式。</li>
</ul>
<p>在读文件的时候：<code>newline=None</code> 表示<code>\r、\n、\r\n</code>都会被转换为<code>\n</code></p>
<p>在写文件的时候：<code>newline=None</code> 表示使用系统的分行符号。</p>
<h4 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">214</span>]: f = open(<span class="string">'test'</span>,mode=<span class="string">'w+'</span>)</span><br></pre></td></tr></table></figure>
<h3 id="打开模式"><a href="#打开模式" class="headerlink" title="打开模式"></a>打开模式</h3><table>
<thead>
<tr>
<th>模式</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>r</td>
<td>以只读方式打开文件。文件的指针将会放在文件的开头。这是默认模式。</td>
</tr>
<tr>
<td>rb</td>
<td>以二进制格式打开一个文件用于只读。文件指针将会放在文件的开头。这是默认模式。一般用于非文本文件如图片等。</td>
</tr>
<tr>
<td>r+</td>
<td>打开一个文件用于读写。文件指针将会放在文件的开头。</td>
</tr>
<tr>
<td>rb+</td>
<td>以二进制格式打开一个文件用于读写。文件指针将会放在文件的开头。一般用于非文本文件如图片等。</td>
</tr>
<tr>
<td>w</td>
<td>打开一个文件只用于写入。如果该文件已存在则将其覆盖。如果该文件不存在，创建新文件。</td>
</tr>
<tr>
<td>wb</td>
<td>以二进制格式打开一个文件只用于写入。如果该文件已存在则将其覆盖。如果该文件不存在，创建新文件。一般用于非文本文件如图片等。</td>
</tr>
<tr>
<td>w+</td>
<td>打开一个文件用于读写。如果该文件已存在则将其覆盖。如果该文件不存在，创建新文件。</td>
</tr>
<tr>
<td>wb+</td>
<td>以二进制格式打开一个文件用于读写。如果该文件已存在则将其覆盖。如果该文件不存在，创建新文件。一般用于非文本文件如图片等。</td>
</tr>
<tr>
<td>a</td>
<td>打开一个文件用于追加。如果该文件已存在，文件指针将会放在文件的结尾。也就是说，新的内容将会被写入到已有内容之后。如果该文件不存在，创建新文件进行写入。</td>
</tr>
<tr>
<td>ab</td>
<td>以二进制格式打开一个文件用于追加。如果该文件已存在，文件指针将会放在文件的结尾。也就是说，新的内容将会被写入到已有内容之后。如果该文件不存在，创建新文件进行写入。</td>
</tr>
<tr>
<td>a+</td>
<td>打开一个文件用于读写。如果该文件已存在，文件指针将会放在文件的结尾。文件打开时会是追加模式。如果该文件不存在，创建新文件用于读写。</td>
</tr>
<tr>
<td>ab+</td>
<td>以二进制格式打开一个文件用于追加。如果该文件已存在，文件指针将会放在文件的结尾。如果该文件不存在，创建新文件用于读写。</td>
</tr>
</tbody>
</table>
<ul>
<li>示例</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">31</span>]: f2 = open(<span class="string">'/tmp/1.jpg'</span>,<span class="string">'rb+'</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">32</span>]: f2.read()</span><br><span class="line">Out[<span class="number">32</span>]: <span class="string">b'\xff\xd8\xff\xe0\x00\x10JFIF\x00\x0</span></span><br></pre></td></tr></table></figure>
<h3 id="写入数据-write"><a href="#写入数据-write" class="headerlink" title="写入数据.write()"></a>写入数据.write()</h3><p>在写入模式下，向文件写入数据</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">215</span>]: f.write(<span class="string">'abcd'</span>)</span><br><span class="line">Out[<span class="number">215</span>]: <span class="number">4</span></span><br></pre></td></tr></table></figure>
<h3 id="写入字符序列-writelines"><a href="#写入字符序列-writelines" class="headerlink" title="写入字符序列.writelines()"></a>写入字符序列.writelines()</h3><p>写入一个序列，只能是字符串，不自动添加换行，需要在序列中自己添加换行</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">82</span>]: <span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line">In [<span class="number">83</span>]: l1 = os.listdir(<span class="string">'/etc'</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">85</span>]: f3.writelines(l1)</span><br><span class="line">    </span><br><span class="line">In [<span class="number">88</span>]: f3.flush()</span><br><span class="line"></span><br><span class="line">In [<span class="number">89</span>]: f3.read()</span><br><span class="line">Out[<span class="number">89</span>]: <span class="string">''</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">90</span>]: f3.seek(<span class="number">0</span>)</span><br><span class="line">Out[<span class="number">90</span>]: <span class="number">0</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">91</span>]: f3.read()</span><br><span class="line">Out[<span class="number">91</span>]: <span class="string">'fstabcrypttabmtabresolv.confgrub.dpkirpmyum.repos.dyummagiccentos-</span></span><br><span class="line"><span class="string">.........</span></span><br></pre></td></tr></table></figure>
<h3 id="关闭文件-close"><a href="#关闭文件-close" class="headerlink" title="关闭文件.close()"></a>关闭文件.close()</h3><p>调用 <code>close</code> 方法以后文件对象还存在，但是不能再进行操作了，每次不需要对文件操作的时候需要显式执行关闭操作。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">216</span>]: f.close()</span><br></pre></td></tr></table></figure>
<h3 id="读取内容-read"><a href="#读取内容-read" class="headerlink" title="读取内容.read()"></a>读取内容.read()</h3><p>从文件中读取指定个字符，指针会移动到读取后的位置，默认读取到文件尾部。</p>
<p>参数：<code>read(size=-1)</code></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">217</span>]: f = open(<span class="string">'test'</span>,mode=<span class="string">'r+'</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">218</span>]: f.read()</span><br><span class="line">Out[<span class="number">218</span>]: <span class="string">'abcd'</span></span><br></pre></td></tr></table></figure>
<h3 id="读取一行-readline"><a href="#读取一行-readline" class="headerlink" title="读取一行.readline()"></a>读取一行.readline()</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">238</span>]: f = open(<span class="string">'/etc/rc.local'</span>,<span class="string">'r+'</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">244</span>]: f.readline()</span><br><span class="line">Out[<span class="number">244</span>]: <span class="string">'#!/bin/bash\n'</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">245</span>]: f.readline()</span><br><span class="line">Out[<span class="number">245</span>]: <span class="string">'# THIS FILE IS ADDED FOR COMPATIBILITY PURPOSES\n'</span></span><br></pre></td></tr></table></figure>
<h3 id="生成每行列表-readlines"><a href="#生成每行列表-readlines" class="headerlink" title="生成每行列表.readlines()"></a>生成每行列表.readlines()</h3><p>将文件内容的每一行当作列表的每一个元素</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">240</span>]: f.readlines()</span><br><span class="line">Out[<span class="number">240</span>]: </span><br><span class="line">[<span class="string">'#!/bin/bash\n'</span>,</span><br><span class="line"> <span class="string">'# THIS FILE IS ADDED FOR COMPATIBILITY PURPOSES\n'</span>,</span><br><span class="line"> <span class="string">'#\n'</span>,</span><br><span class="line"> <span class="string">'# It is highly advisable to create own systemd services or udev rules\n'</span>,</span><br><span class="line"> <span class="string">'# to run scripts during boot instead of using this file.\n'</span>,</span><br><span class="line"> <span class="string">'#\n'</span>,</span><br><span class="line"> <span class="string">'# In contrast to previous versions due to parallel execution during boot\n'</span>,</span><br><span class="line"> <span class="string">'# this script will NOT be run after all other services.\n'</span>,</span><br><span class="line"> <span class="string">'#\n'</span>,</span><br><span class="line"> <span class="string">"# Please note that you must run 'chmod +x /etc/rc.d/rc.local' to ensure\n"</span>,</span><br><span class="line"> <span class="string">'# that this script will be executed during boot.\n'</span>,</span><br><span class="line"> <span class="string">'\n'</span>,</span><br><span class="line"> <span class="string">'touch /var/lock/subsys/local\n'</span>,</span><br><span class="line"> <span class="string">"su - python -c 'cd /home/python/magedu/projects/test &amp;&amp; jupyter-notebook --ip=0.0.0.0'\n"</span>]</span><br></pre></td></tr></table></figure>
<h3 id="移动指针-seek"><a href="#移动指针-seek" class="headerlink" title="移动指针.seek()"></a>移动指针.seek()</h3><p>把当前的操作指针移动从<code>whence</code> 定义的位置开始偏移 <code>offset</code> 的字节量。 </p>
<ul>
<li>用法：<code>seek(offset [,whence])</code></li>
</ul>
<p><code>offset</code> 偏移量，（当 <code>whence</code> 为1时可以为负数）</p>
<p><code>whence</code> 指定偏移的开始位置</p>
<table>
<thead>
<tr>
<th>参数</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>whence的默认值，表示从文件的头部开始</td>
</tr>
<tr>
<td>1</td>
<td>表示从当前位置开始</td>
</tr>
<tr>
<td>2</td>
<td>表示从文件的尾部开始</td>
</tr>
</tbody>
</table>
<ul>
<li>示例<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">250</span>]: f = open(<span class="string">'/etc/rc.local'</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">251</span>]: f.readlines()</span><br><span class="line">Out[<span class="number">251</span>]: </span><br><span class="line">[<span class="string">'#!/bin/bash\n'</span>,</span><br><span class="line"> <span class="string">'# THIS FILE IS ADDED FOR COMPATIBILITY PURPOSES\n'</span>,</span><br><span class="line"> <span class="string">'#\n'</span>,</span><br><span class="line"> <span class="string">'# It is highly advisable to create own systemd services or udev rules\n'</span>,</span><br><span class="line"> <span class="string">'# to run scripts during boot instead of using this file.\n'</span>,</span><br><span class="line"> <span class="string">'#\n'</span>,</span><br><span class="line"> <span class="string">'# In contrast to previous versions due to parallel execution during boot\n'</span>,</span><br><span class="line"> <span class="string">'# this script will NOT be run after all other services.\n'</span>,</span><br><span class="line"> <span class="string">'#\n'</span>,</span><br><span class="line"> <span class="string">"# Please note that you must run 'chmod +x /etc/rc.d/rc.local' to ensure\n"</span>,</span><br><span class="line"> <span class="string">'# that this script will be executed during boot.\n'</span>,</span><br><span class="line"> <span class="string">'\n'</span>,</span><br><span class="line"> <span class="string">'touch /var/lock/subsys/local\n'</span>,</span><br><span class="line"> <span class="string">"su - python -c 'cd /home/python/magedu/projects/test &amp;&amp; jupyter-notebook --ip=0.0.0.0'\n"</span>]</span><br><span class="line"></span><br><span class="line">In [<span class="number">252</span>]: f.readline()</span><br><span class="line">Out[<span class="number">252</span>]: <span class="string">''</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">253</span>]: f.seek(<span class="number">0</span>)</span><br><span class="line">Out[<span class="number">253</span>]: <span class="number">0</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">254</span>]: f.readline()</span><br><span class="line">Out[<span class="number">254</span>]: <span class="string">'#!/bin/bash\n'</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="指针位置-tell"><a href="#指针位置-tell" class="headerlink" title="指针位置.tell()"></a>指针位置.tell()</h3><p>显示当前指针所在的字节数</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">14</span>]: f.readline()</span><br><span class="line">Out[<span class="number">14</span>]: <span class="string">'# to run scripts during boot instead of using this file.\n'</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">15</span>]: f.tell()</span><br><span class="line">Out[<span class="number">15</span>]: <span class="number">189</span></span><br></pre></td></tr></table></figure>
<h3 id="写入磁盘-flush"><a href="#写入磁盘-flush" class="headerlink" title="写入磁盘.flush()"></a>写入磁盘.flush()</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">72</span>]: f1.flush()</span><br></pre></td></tr></table></figure>
<h2 id="属性检测"><a href="#属性检测" class="headerlink" title="属性检测"></a>属性检测</h2><h3 id="可读检测-readable"><a href="#可读检测-readable" class="headerlink" title="可读检测.readable()"></a>可读检测.readable()</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">94</span>]: f3.readable()</span><br><span class="line">Out[<span class="number">94</span>]: <span class="keyword">True</span></span><br></pre></td></tr></table></figure>
<h3 id="可写检测-writable"><a href="#可写检测-writable" class="headerlink" title="可写检测.writable()"></a>可写检测.writable()</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">95</span>]: f3.writable()</span><br><span class="line">Out[<span class="number">95</span>]: <span class="keyword">True</span></span><br></pre></td></tr></table></figure>
<h3 id="是否为终端-isatty"><a href="#是否为终端-isatty" class="headerlink" title="是否为终端.isatty()"></a>是否为终端.isatty()</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">97</span>]: f3.isatty()</span><br><span class="line">Out[<span class="number">97</span>]: <span class="keyword">False</span></span><br></pre></td></tr></table></figure>
<h3 id="是否已关闭-closed"><a href="#是否已关闭-closed" class="headerlink" title="是否已关闭.closed"></a>是否已关闭.closed</h3><p>显示文件是否已经关闭</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">219</span>]: f.close()</span><br><span class="line"></span><br><span class="line">In [<span class="number">220</span>]: f.closed</span><br><span class="line">Out[<span class="number">220</span>]: <span class="keyword">True</span></span><br></pre></td></tr></table></figure>
<h2 id="属性获取"><a href="#属性获取" class="headerlink" title="属性获取"></a>属性获取</h2><h3 id="文件描述符-fileno"><a href="#文件描述符-fileno" class="headerlink" title="文件描述符.fileno"></a>文件描述符.fileno</h3><p>是文件对象的属性，可以得到系统文件描述符，（是一个整数，用来引用的文件）。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">226</span>]: f.fileno()</span><br><span class="line">Out[<span class="number">226</span>]: <span class="number">13</span></span><br></pre></td></tr></table></figure>
<h3 id="文件名称-name"><a href="#文件名称-name" class="headerlink" title="文件名称.name"></a>文件名称.name</h3><p>获取文件对象的名称</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">257</span>]: f.name</span><br><span class="line">Out[<span class="number">257</span>]: <span class="string">'/etc/rc.local'</span></span><br></pre></td></tr></table></figure>
<h3 id="操作模式-mode"><a href="#操作模式-mode" class="headerlink" title="操作模式.mode"></a>操作模式.mode</h3><p>显示文件的操作模式</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">58</span>]: f1.mode</span><br><span class="line">Out[<span class="number">58</span>]: <span class="string">'r+'</span></span><br></pre></td></tr></table></figure>
<h3 id="文件编码-encoding"><a href="#文件编码-encoding" class="headerlink" title="文件编码.encoding"></a>文件编码.encoding</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">103</span>]: f3.encoding</span><br><span class="line">Out[<span class="number">103</span>]: <span class="string">'UTF-8'</span></span><br></pre></td></tr></table></figure>
<h3 id="换行符号-newlines"><a href="#换行符号-newlines" class="headerlink" title="换行符号.newlines"></a>换行符号.newlines</h3><p>显示从文件头到当前指针处所遇到的所有换行符</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">107</span>]: f1 = open(<span class="string">'test1'</span>,<span class="string">'w+'</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">108</span>]: f1.write(<span class="string">'hello\nworld\r\nthis is a test\r'</span>)</span><br><span class="line">Out[<span class="number">108</span>]: <span class="number">28</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">109</span>]: f1.close()</span><br><span class="line"></span><br><span class="line">In [<span class="number">110</span>]: f1 = open(<span class="string">'test1'</span>,<span class="string">'r+'</span>)</span><br><span class="line"></span><br><span class="line">In [<span class="number">111</span>]: f1.read()</span><br><span class="line">Out[<span class="number">111</span>]: <span class="string">'hello\nworld\nthis is a test\n'</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">112</span>]: f1.newlines</span><br><span class="line">Out[<span class="number">112</span>]: (<span class="string">'\r'</span>, <span class="string">'\n'</span>, <span class="string">'\r\n'</span>)</span><br></pre></td></tr></table></figure>
<h2 id="异常处理"><a href="#异常处理" class="headerlink" title="异常处理"></a>异常处理</h2><p>无论如何保证文件被关闭。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">134</span>]: <span class="keyword">try</span>:</span><br><span class="line">     ...:     f3.write(<span class="string">'hello'</span>)</span><br><span class="line">     ...: <span class="keyword">finally</span>:</span><br><span class="line">     ...:     f3.close()</span><br><span class="line">     ...:     </span><br><span class="line"></span><br><span class="line">In [<span class="number">135</span>]: f3</span><br><span class="line">Out[<span class="number">135</span>]: &lt;_io.TextIOWrapper name=<span class="string">'test'</span> mode=<span class="string">'w+'</span> encoding=<span class="string">'UTF-8'</span>&gt;</span><br><span class="line"></span><br><span class="line">In [<span class="number">136</span>]: f3.read()</span><br><span class="line">---------------------------------------------------------------------------</span><br><span class="line">ValueError                                Traceback (most recent call last)</span><br><span class="line">&lt;ipython-input<span class="number">-136</span><span class="number">-26180816</span>d387&gt; <span class="keyword">in</span> &lt;module&gt;()</span><br><span class="line">----&gt; 1 f3.read()</span><br><span class="line"></span><br><span class="line">ValueError: I/O operation on closed file.</span><br></pre></td></tr></table></figure>
<h2 id="上下文管理"><a href="#上下文管理" class="headerlink" title="上下文管理"></a>上下文管理</h2><p>文件对象打开的时候会获得一个系统的文件描述符，计算机的文件描述符资源是有限的，为了保护资源不被耗尽，所以可以使用with语句来自动关闭文件对象。</p>
<p>上下文管理的语句块不会开启新的作用域，with语句块执行完的时候，会自动关闭文件对象。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">151</span>]: <span class="keyword">with</span> open(<span class="string">'test'</span>) <span class="keyword">as</span> f1:</span><br><span class="line">     ...:     f1.write(<span class="string">'world'</span>)</span><br><span class="line">     ...:     </span><br><span class="line">---------------------------------------------------------------------------</span><br><span class="line">UnsupportedOperation                      Traceback (most recent call last)</span><br><span class="line">&lt;ipython-input<span class="number">-151</span>-e8f2dd01d41e&gt; <span class="keyword">in</span> &lt;module&gt;()</span><br><span class="line">      <span class="number">1</span> <span class="keyword">with</span> open(<span class="string">'test'</span>) <span class="keyword">as</span> f1:</span><br><span class="line">----&gt; 2     f1.write('world')</span><br><span class="line">      <span class="number">3</span> </span><br><span class="line"></span><br><span class="line">UnsupportedOperation: <span class="keyword">not</span> writable</span><br><span class="line"></span><br><span class="line">In [<span class="number">152</span>]: <span class="keyword">with</span> open(<span class="string">'test'</span>,<span class="string">'w+'</span>) <span class="keyword">as</span> f1:</span><br><span class="line">     ...:     f1.write(<span class="string">'world'</span>)</span><br><span class="line">     ...:</span><br></pre></td></tr></table></figure>
<h2 id="示例-1"><a href="#示例-1" class="headerlink" title="示例"></a>示例</h2><ul>
<li>按行迭代复制文件内容</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">copy</span><span class="params">(src,dst)</span>:</span></span><br><span class="line">    <span class="keyword">with</span> open(dst) <span class="keyword">as</span> file1:</span><br><span class="line">		<span class="keyword">with</span> open(src,<span class="string">'w+'</span>) <span class="keyword">as</span> file2:</span><br><span class="line">			<span class="keyword">for</span> i <span class="keyword">in</span> file1:</span><br><span class="line">				file2.write(i)</span><br></pre></td></tr></table></figure>
<ul>
<li>统计文件的单词不区分大小写，显示重复最多的10个单词</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">makekey</span><span class="params">(s:str)</span>:</span></span><br><span class="line">    chars = set(<span class="string">r'''!@#$%^&amp;*()_+-='/\&lt;&gt;;[]|.,?&#123;&#125;~`:'''</span>)</span><br><span class="line">    key = s.lower()</span><br><span class="line">    ret = []</span><br><span class="line">    <span class="keyword">for</span> i,c <span class="keyword">in</span> enumerate(key):</span><br><span class="line">        <span class="keyword">if</span> c <span class="keyword">in</span> chars:</span><br><span class="line">            ret.append(<span class="string">' '</span>)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            ret.append(c)</span><br><span class="line">    <span class="keyword">return</span> <span class="string">''</span>.join(ret).split()</span><br><span class="line"></span><br><span class="line">d = &#123;&#125;</span><br><span class="line"><span class="keyword">with</span> open(<span class="string">'sample.txt'</span>,encoding=<span class="string">'utf-8'</span>) <span class="keyword">as</span> f:</span><br><span class="line">    <span class="keyword">for</span> line <span class="keyword">in</span> f:</span><br><span class="line">        words = line.split()</span><br><span class="line">        <span class="keyword">for</span> wordlist <span class="keyword">in</span> map(makekey,words):</span><br><span class="line">            <span class="keyword">for</span> word <span class="keyword">in</span> wordlist:</span><br><span class="line">                d[word] = d.get(word,<span class="number">0</span>) + <span class="number">1</span></span><br><span class="line"><span class="keyword">for</span> k,v <span class="keyword">in</span> sorted(d.items(),key=<span class="keyword">lambda</span> item: item[<span class="number">1</span>],reverse=<span class="keyword">True</span>):</span><br><span class="line">    print(k,v)</span><br></pre></td></tr></table></figure>
<h1 id="StringIO"><a href="#StringIO" class="headerlink" title="StringIO"></a>StringIO</h1><p>StringIO 顾名思义就是在内存中以 I/O 流的方式读写 str，当文件关闭后内存释放。</p>
<p>除了可以像文件一样对其读写，还支持下面的方法。</p>
<h2 id="创建对象StringIO"><a href="#创建对象StringIO" class="headerlink" title="创建对象StringIO()"></a>创建对象StringIO()</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">In [4]: from io import StringIO</span><br><span class="line">In [8]: f = StringIO()</span><br></pre></td></tr></table></figure>
<h2 id="读取文件内容-getvalue"><a href="#读取文件内容-getvalue" class="headerlink" title="读取文件内容.getvalue"></a>读取文件内容.getvalue</h2><p>无视指针的作用读取文件的所有内容</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">94</span>]: f.getvalue()</span><br><span class="line">Out[<span class="number">94</span>]: <span class="string">'abcdefghijklmn\nopqrst\n'</span></span><br></pre></td></tr></table></figure>
<h2 id="从指针处删除-truncate"><a href="#从指针处删除-truncate" class="headerlink" title="从指针处删除.truncate"></a>从指针处删除.truncate</h2><p>用法：<code>truncate([size])</code> ，不指定 <code>size</code> 则删除到文件尾部</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">152</span>]: f.write(<span class="string">'0123456789'</span>)</span><br><span class="line">Out[<span class="number">152</span>]: <span class="number">10</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">153</span>]: f.write(<span class="string">'0123456789'</span>)</span><br><span class="line">Out[<span class="number">153</span>]: <span class="number">10</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">154</span>]: f.getvalue()</span><br><span class="line">Out[<span class="number">154</span>]: <span class="string">'01234567890123456789'</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">156</span>]: f.seek(<span class="number">10</span>)</span><br><span class="line">Out[<span class="number">156</span>]: <span class="number">10</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">157</span>]: f.truncate()</span><br><span class="line">Out[<span class="number">157</span>]: <span class="number">10</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">158</span>]: f.getvalue()</span><br><span class="line">Out[<span class="number">158</span>]: <span class="string">'0123456789'</span></span><br></pre></td></tr></table></figure>
<h2 id="示例-2"><a href="#示例-2" class="headerlink" title="示例"></a>示例</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">with</span> StringIO <span class="keyword">as</span> f:</span><br><span class="line">    f.write (<span class="string">'yangjinheng'</span>)</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">from</span> io <span class="keyword">import</span> StringIO</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>f = StringIO(<span class="string">'Hello!\nHi!\nGoodbye!'</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">while</span> <span class="keyword">True</span>:</span><br><span class="line"><span class="meta">... </span>    s = f.readline()</span><br><span class="line"><span class="meta">... </span>    <span class="keyword">if</span> s == <span class="string">''</span>:</span><br><span class="line"><span class="meta">... </span>        <span class="keyword">break</span></span><br><span class="line"><span class="meta">... </span>    print(s.strip())</span><br><span class="line">...</span><br><span class="line">Hello!</span><br><span class="line">Hi!</span><br><span class="line">Goodbye!</span><br></pre></td></tr></table></figure>
<h1 id="BytesIO"><a href="#BytesIO" class="headerlink" title="BytesIO"></a>BytesIO</h1><p>内存中开辟的一个<strong>二进制</strong>模式的buffer，也可以像文件对象一样操作它，当close方法调用的时候，这个buffer也会被释放。</p>
<h2 id="创建对象BytesIO"><a href="#创建对象BytesIO" class="headerlink" title="创建对象BytesIO"></a>创建对象BytesIO</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">167</span>]: <span class="keyword">from</span> io <span class="keyword">import</span> BytesIO</span><br><span class="line"></span><br><span class="line">In [<span class="number">168</span>]: f = BytesIO()</span><br></pre></td></tr></table></figure>
<h2 id="读取文件内容-getvalue-1"><a href="#读取文件内容-getvalue-1" class="headerlink" title="读取文件内容.getvalue"></a>读取文件内容.getvalue</h2><p>无视文件指针读取文件内容</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">In [<span class="number">185</span>]: f.getvalue()</span><br><span class="line">Out[<span class="number">185</span>]: <span class="string">b'\xe4\xb8\xad\xe6\x96\x87'</span></span><br></pre></td></tr></table></figure>
<h2 id="示例-3"><a href="#示例-3" class="headerlink" title="示例"></a>示例</h2><p>请注意，写入的不是str，而是经过UTF-8编码的bytes。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">from</span> io <span class="keyword">import</span> BytesIO</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>f = BytesIO()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>f.write(<span class="string">'中文'</span>.encode(<span class="string">'utf-8'</span>))</span><br><span class="line"><span class="number">12</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print(f.getvalue())</span><br><span class="line"><span class="string">b'\xe6\x88\x91\xe6\x98\xaf\xe4\xb8\xad\xe6\x96\x87'</span></span><br></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/21/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/21/">21</a><span class="page-number current">22</span><a class="page-number" href="/page/23/">23</a><span class="space">&hellip;</span><a class="page-number" href="/page/29/">29</a><a class="extend next" rel="next" href="/page/23/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="/images/avatar.jpg" alt="Jin Heng">
            
              <p class="site-author-name" itemprop="name">Jin Heng</p>
              <p class="site-description motion-element" itemprop="description">欢迎小伙伴们留言</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives">
              
                  <span class="site-state-item-count">58</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">4</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            

          </nav>

          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/yangjinheng" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i>GitHub</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="mailto:jinhengyang@foxmail.com" target="_blank" title="E-Mail">
                      
                        <i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                  </span>
                
            </div>
          

          
          

          
          

          <div id="music163player">
    <iframe style="margin-top:20px" frameborder="no" border="0" marginwidth="0" marginheight="0" width="298" height="52" src="//music.163.com/outchain/player?type=2&id=473571801&auto=1&height=32"></iframe>
</div>
        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; 2017 &mdash; <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Jin Heng</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Pisces</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
